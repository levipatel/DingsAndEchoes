{"ast":null,"code":"import _slicedToArray from\"/Users/levipatel/Github/DingsAndEchoes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// based off https://medium.com/@pdx.lucasm/canvas-with-react-js-32e133c05258\nimport React,{useState,useRef,useEffect,Component}from'react';import{Sampler}from\"tone\";import A1 from\"./audio/ding-1.wav\";var Canvas=function Canvas(props){var canvasRef=useRef(null);// TODO: move out of component, should be passed as a prop\nvar draw=function draw(ctx){ctx.fillStyle='#000000';ctx.beginPath();ctx.arc(50,100,20,0,2*Math.PI);ctx.fill();};useEffect(function(){var canvas=canvasRef.current;var context=canvas.getContext('2d');//Our draw come here\ndraw(context);},[draw]);//Set up sampler\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setLoaded=_useState2[1];var sampler=useRef(null);useEffect(function(){sampler.current=new Sampler({A1:A1},{onload:function onload(){setLoaded(true);}}).toMaster();},[]);//Function to make a tone\nfunction playTone(){if(isLoaded){sampler.current.triggerAttack(\"A1\");}}//Timed function that calls the tone generation regularly\nsetInterval(playTone,3000);return/*#__PURE__*/React.createElement(\"canvas\",Object.assign({ref:canvasRef},props));};export default Canvas;","map":{"version":3,"sources":["/Users/levipatel/Github/DingsAndEchoes/src/Canvas.js"],"names":["React","useState","useRef","useEffect","Component","Sampler","A1","Canvas","props","canvasRef","draw","ctx","fillStyle","beginPath","arc","Math","PI","fill","canvas","current","context","getContext","isLoaded","setLoaded","sampler","onload","toMaster","playTone","triggerAttack","setInterval"],"mappings":"6JAAA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,CAA6CC,SAA7C,KAA8D,OAA9D,CACA,OAASC,OAAT,KAAwB,MAAxB,CACA,MAAOC,CAAAA,EAAP,KAAe,oBAAf,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,CAAI,CAEtB,GAAMC,CAAAA,SAAS,CAAGP,MAAM,CAAC,IAAD,CAAxB,CAEA;AACA,GAAMQ,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,GAAG,CAAI,CAClBA,GAAG,CAACC,SAAJ,CAAgB,SAAhB,CACAD,GAAG,CAACE,SAAJ,GACAF,GAAG,CAACG,GAAJ,CAAQ,EAAR,CAAY,GAAZ,CAAiB,EAAjB,CAAqB,CAArB,CAAwB,EAAEC,IAAI,CAACC,EAA/B,EACAL,GAAG,CAACM,IAAJ,GACD,CALD,CAOAd,SAAS,CAAC,UAAM,CAEd,GAAMe,CAAAA,MAAM,CAAGT,SAAS,CAACU,OAAzB,CACA,GAAMC,CAAAA,OAAO,CAAGF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAhB,CAEA;AACAX,IAAI,CAACU,OAAD,CAAJ,CACD,CAPQ,CAON,CAACV,IAAD,CAPM,CAAT,CASA;AArBsB,cAsBQT,QAAQ,CAAC,KAAD,CAtBhB,wCAsBfqB,QAtBe,eAsBLC,SAtBK,eAuBtB,GAAMC,CAAAA,OAAO,CAAGtB,MAAM,CAAC,IAAD,CAAtB,CAEAC,SAAS,CAAC,UAAM,CACdqB,OAAO,CAACL,OAAR,CAAkB,GAAId,CAAAA,OAAJ,CAChB,CAAEC,EAAE,CAAFA,EAAF,CADgB,CAEhB,CACEmB,MAAM,CAAE,iBAAM,CACZF,SAAS,CAAC,IAAD,CAAT,CACD,CAHH,CAFgB,EAOhBG,QAPgB,EAAlB,CAQD,CATQ,CASN,EATM,CAAT,CAWA;AACA,QAASC,CAAAA,QAAT,EAAoB,CAClB,GAAIL,QAAJ,CAAa,CACXE,OAAO,CAACL,OAAR,CAAgBS,aAAhB,CAA8B,IAA9B,EACD,CACF,CAED;AACAC,WAAW,CAACF,QAAD,CAAW,IAAX,CAAX,CAEA,mBAAO,4CAAQ,GAAG,CAAElB,SAAb,EAA4BD,KAA5B,EAAP,CACD,CA/CD,CAiDA,cAAeD,CAAAA,MAAf","sourcesContent":["// based off https://medium.com/@pdx.lucasm/canvas-with-react-js-32e133c05258\nimport React, { useState, useRef, useEffect, Component } from 'react';\nimport { Sampler } from \"tone\";\nimport A1 from \"./audio/ding-1.wav\";\n\nconst Canvas = props => {\n  \n  const canvasRef = useRef(null)\n  \n  // TODO: move out of component, should be passed as a prop\n  const draw = ctx => {\n    ctx.fillStyle = '#000000'\n    ctx.beginPath()\n    ctx.arc(50, 100, 20, 0, 2*Math.PI)\n    ctx.fill()\n  }\n  \n  useEffect(() => {\n    \n    const canvas = canvasRef.current\n    const context = canvas.getContext('2d')\n    \n    //Our draw come here\n    draw(context)\n  }, [draw])\n\n  //Set up sampler\n  const [isLoaded, setLoaded] = useState(false);\n  const sampler = useRef(null);\n\n  useEffect(() => {\n    sampler.current = new Sampler(\n      { A1 },\n      {\n        onload: () => {\n          setLoaded(true);\n        }\n      }\n    ).toMaster();\n  }, []);\n\n  //Function to make a tone\n  function playTone() {\n    if (isLoaded){\n      sampler.current.triggerAttack(\"A1\");\n    }\n  }\n\n  //Timed function that calls the tone generation regularly\n  setInterval(playTone, 3000);\n\n  return <canvas ref={canvasRef} {...props}/>\n}\n\nexport default Canvas"]},"metadata":{},"sourceType":"module"}