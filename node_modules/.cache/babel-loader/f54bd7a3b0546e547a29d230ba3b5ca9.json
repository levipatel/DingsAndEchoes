{"ast":null,"code":"export var createNativeMediaStreamAudioSourceNodeFactory = function createNativeMediaStreamAudioSourceNodeFactory(createNativeAudioNode) {\n  return function (nativeAudioContext, _ref) {\n    var mediaStream = _ref.mediaStream;\n    var audioStreamTracks = mediaStream.getAudioTracks();\n    var nativeMediaStreamAudioSourceNode = createNativeAudioNode(nativeAudioContext, function (ntvDCntxt) {\n      /*\n       * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n       * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n       */\n      audioStreamTracks.sort(function (a, b) {\n        return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n      });\n      var filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n      return ntvDCntxt.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n    }); // Bug #63: Edge does not expose the mediaStream yet.\n\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', {\n      value: mediaStream\n    });\n    return nativeMediaStreamAudioSourceNode;\n  };\n};","map":{"version":3,"sources":["../../../src/factories/native-media-stream-audio-source-node-factory.ts"],"names":[],"mappings":"AAEA,OAAO,IAAM,6CAA6C,GAAoD,SAAjG,6CAAiG,CAAC,qBAAD,EAA0B;AACpI,SAAO,UAAC,kBAAD,QAAwC;AAAA,QAAjB,WAAiB,QAAjB,WAAiB;AAC3C,QAAM,iBAAiB,GAAG,WAAW,CAAC,cAAZ,EAA1B;AACA,QAAM,gCAAgC,GAAG,qBAAqB,CAAC,kBAAD,EAAqB,UAAC,SAAD,EAAc;AAC7F;;;;AAIA,MAAA,iBAAiB,CAAC,IAAlB,CAAuB,UAAC,CAAD,EAAI,CAAJ;AAAA,eAAW,CAAC,CAAC,EAAF,GAAO,CAAC,CAAC,EAAT,GAAc,CAAC,CAAf,GAAmB,CAAC,CAAC,EAAF,GAAO,CAAC,CAAC,EAAT,GAAc,CAAd,GAAkB,CAAhD;AAAA,OAAvB;AAEA,UAAM,yBAAyB,GAAG,iBAAiB,CAAC,KAAlB,CAAwB,CAAxB,EAA2B,CAA3B,CAAlC;AAEA,aAAO,SAAS,CAAC,uBAAV,CAAkC,IAAI,WAAJ,CAAgB,yBAAhB,CAAlC,CAAP;AACH,KAV6D,CAA9D,CAF2C,CAc3C;;AACA,IAAA,MAAM,CAAC,cAAP,CAAsB,gCAAtB,EAAwD,aAAxD,EAAuE;AAAE,MAAA,KAAK,EAAE;AAAT,KAAvE;AAEA,WAAO,gCAAP;AACH,GAlBD;AAmBH,CApBM","sourceRoot":"","sourcesContent":["export const createNativeMediaStreamAudioSourceNodeFactory = (createNativeAudioNode) => {\n    return (nativeAudioContext, { mediaStream }) => {\n        const audioStreamTracks = mediaStream.getAudioTracks();\n        const nativeMediaStreamAudioSourceNode = createNativeAudioNode(nativeAudioContext, (ntvDCntxt) => {\n            /*\n             * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n             * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n             */\n            audioStreamTracks.sort((a, b) => (a.id < b.id ? -1 : a.id > b.id ? 1 : 0));\n            const filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n            return ntvDCntxt.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n        });\n        // Bug #63: Edge does not expose the mediaStream yet.\n        Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n//# sourceMappingURL=native-media-stream-audio-source-node-factory.js.map"]},"metadata":{},"sourceType":"module"}