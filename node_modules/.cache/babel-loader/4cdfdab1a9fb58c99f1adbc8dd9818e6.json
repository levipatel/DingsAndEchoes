{"ast":null,"code":"export var createNativeMediaStreamTrackAudioSourceNodeFactory = function createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError, createNativeAudioNode, isNativeOfflineAudioContext) {\n  return function (nativeAudioContext, _ref) {\n    var mediaStreamTrack = _ref.mediaStreamTrack;\n\n    if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n      return createNativeAudioNode(nativeAudioContext, function (ntvDCntxt) {\n        return ntvDCntxt.createMediaStreamTrackSource(mediaStreamTrack);\n      });\n    } // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n\n\n    return createNativeAudioNode(nativeAudioContext, function (ntvDCntxt) {\n      var mediaStream = new MediaStream([mediaStreamTrack]);\n      var nativeMediaStreamAudioSourceNode = ntvDCntxt.createMediaStreamSource(mediaStream); // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n\n      if (mediaStreamTrack.kind !== 'audio') {\n        throw createInvalidStateError();\n      } // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n\n\n      if (isNativeOfflineAudioContext(ntvDCntxt)) {\n        throw new TypeError();\n      }\n\n      return nativeMediaStreamAudioSourceNode;\n    });\n  };\n};","map":{"version":3,"sources":["../../../src/factories/native-media-stream-track-audio-source-node-factory.ts"],"names":[],"mappings":"AAEA,OAAO,IAAM,kDAAkD,GAAyD,SAA3G,kDAA2G,CACpH,uBADoH,EAEpH,qBAFoH,EAGpH,2BAHoH,EAIpH;AACA,SAAO,UAAC,kBAAD,QAA6C;AAAA,QAAtB,gBAAsB,QAAtB,gBAAsB;;AAChD,QAAI,OAAO,kBAAkB,CAAC,4BAA1B,KAA2D,UAA/D,EAA2E;AACvE,aAAO,qBAAqB,CAAC,kBAAD,EAAqB,UAAC,SAAD;AAAA,eAAe,SAAS,CAAC,4BAAV,CAAuC,gBAAvC,CAAf;AAAA,OAArB,CAA5B;AACH,KAH+C,CAKhD;;;AACA,WAAO,qBAAqB,CAAC,kBAAD,EAAqB,UAAC,SAAD,EAAc;AAC3D,UAAM,WAAW,GAAG,IAAI,WAAJ,CAAgB,CAAC,gBAAD,CAAhB,CAApB;AACA,UAAM,gCAAgC,GAAG,SAAS,CAAC,uBAAV,CAAkC,WAAlC,CAAzC,CAF2D,CAI3D;;AACA,UAAI,gBAAgB,CAAC,IAAjB,KAA0B,OAA9B,EAAuC;AACnC,cAAM,uBAAuB,EAA7B;AACH,OAP0D,CAS3D;;;AACA,UAAI,2BAA2B,CAAC,SAAD,CAA/B,EAA4C;AACxC,cAAM,IAAI,SAAJ,EAAN;AACH;;AAED,aAAO,gCAAP;AACH,KAf2B,CAA5B;AAgBH,GAtBD;AAuBH,CA5BM","sourceRoot":"","sourcesContent":["export const createNativeMediaStreamTrackAudioSourceNodeFactory = (createInvalidStateError, createNativeAudioNode, isNativeOfflineAudioContext) => {\n    return (nativeAudioContext, { mediaStreamTrack }) => {\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n            return createNativeAudioNode(nativeAudioContext, (ntvDCntxt) => ntvDCntxt.createMediaStreamTrackSource(mediaStreamTrack));\n        }\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n        return createNativeAudioNode(nativeAudioContext, (ntvDCntxt) => {\n            const mediaStream = new MediaStream([mediaStreamTrack]);\n            const nativeMediaStreamAudioSourceNode = ntvDCntxt.createMediaStreamSource(mediaStream);\n            // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n            if (mediaStreamTrack.kind !== 'audio') {\n                throw createInvalidStateError();\n            }\n            // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(ntvDCntxt)) {\n                throw new TypeError();\n            }\n            return nativeMediaStreamAudioSourceNode;\n        });\n    };\n};\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory.js.map"]},"metadata":{},"sourceType":"module"}